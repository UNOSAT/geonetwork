<div id="main-container" data-theme="main" ng-controller="MainController as mainCtrl">

  <!--Header-->
  <header class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="http://reseau-tchad.org/" target="_blank">
          <img class="respimg" width="180" alt="ResEau" src="../../catalog/views/unosat/img/Logo_cercle_ResEau_v1_lueur.png" style="">
        </a>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <un-search un-search-map="mainCtrl.map"></un-search>
        </li>
      </ul>

    </div>

  </header>

  <!--Container-->
  <div id="map-container" >
    <div id="sidebar" ng-class="{open: mainCtrl.sidebarOpen()}"
         ngeo-resizemap="mainCtrl.map">

      <!--Layers sidebar-->
      <div id="layers" data-ng-show="mainCtrl.layersOpen">
        <h2 translate>layers</h2>
        <button class="close-panel" ng-click="mainCtrl.closeSidebar()">
          ✕
        </button>

        <!--Background layer combo-->
        <un-backgroundlayer un-backgroundlayer-map="::mainCtrl.map"></un-backgroundlayer>

        <!--Tab panel header-->
        <ul class="nav nav-tabs">
          <li role="presentation" class="active">
            <a href="#mymap" data-toggle="tab">
              <span translate>Layers</span>
              <span ng-if="mainCtrl.selectedLayers.length > 0">({{mainCtrl.selectedLayers.length}})</span>
            </a>
          </li>
          <li role="presentation">
            <a href="#catalog" data-toggle="tab" translate>catalog</a>
          </li>
        </ul>

        <!--Tab panel content-->
        <div class="tab-content">

          <!--Mymap, list of inmap layer-->
          <div id="mymap" class="tab-pane active">
            <un-layermanager un-layermanager-map="::mainCtrl.map"
                              app-layermanager-layers="::mainCtrl.selectedLayers">
            </un-layermanager>
            <div class="text-center">
              <button class="btn btn-default" ng-click="mainCtrl.showTab('a[href=#catalog]');" translate>+ Add layers</button>
            </div>
          </div>

          <!--Catalog tree-->
          <div id="catalog" class="tab-pane">
            <un-catalog un-catalog-map="::mainCtrl.map"></un-catalog>
          </div>
        </div>
      </div>

      <!--Map management (save/load contexts)-->
      <div id="contextpanel" data-ng-show="mainCtrl.contextOpen">
        <h2 translate>maps</h2>
        <button class="close-panel" ng-click="mainCtrl.closeSidebar()">
          ✕
        </button>

        <div gn-ows-context="" map="::mainCtrl.map"></div>
      </div>

      <!--Print form panel-->
      <div id="printpanel" data-ng-show="mainCtrl.printOpen">
        <h2 translate>print</h2>
        <button class="close-panel" ng-click="mainCtrl.closeSidebar()">
          ✕
        </button>
        <div gn-mapprint="" print-active="mainCtrl.printOpen" map="::mainCtrl.map"></div>
      </div>
    </div>

    <div class="un-main-tools" ngeo-btn-group ng-class="{active: mainCtrl.sidebarOpen()}">
      <button class="un-tool-btn btn" ngeo-btn ng-model="mainCtrl.layersOpen"><span class="icon layers"></span> </button>
      <button class="un-tool-btn btn" ngeo-btn ng-model="mainCtrl.contextOpen"><i class="icon map"></i> </button>
      <button class="un-tool-btn btn" ngeo-btn ng-model="mainCtrl.printOpen"><i class="fa fa-print"></i> </button>
      <button class="un-tool-btn btn" ngeo-btn ng-model="mainCtrl.mInteraction.active"><i class="icon measure"></i> </button>
      <button class="un-tool-btn btn"><i class="fa fa-pencil"></i> </button>
    </div>

    <div id="measurepanel" data-ng-show="mainCtrl.mInteraction.active">
      <button class="close-panel" ng-click="mainCtrl.mInteraction.active = false">
        ✕
      </button>
      <div class="gn-measure-text">
        <dl class="dl-horizontal">
          <dt>{{'Distance' | translate}}</dt>
          <dd>{{mainCtrl.measureObj.distance | measure}}</dd>
          <dt>{{'Surface' | translate}}</dt>
          <dd>{{mainCtrl.measureObj.surface | measure:'area':['km&sup2', ' m&sup2']}}</dd>
        </dl>
      </div>
    </div>

    <div ngeo-map="mainCtrl.map">
    </div>
  </div>
  <footer ng-class="{'offset-left': mainCtrl.sidebarOpen()}">
<!--
    <div id="scale-position" ngeo-control="mainCtrl.scaleControl" ngeo-control-map="mainCtrl.map"></div>
-->
  </footer>
</div>